name: macos_test
on: [push]
jobs:
  build:
    runs-on: macos-latest
    steps:
    - name: Checkout
      uses: actions/checkout@v4

    - name: Install yadm
      run: brew install yadm

    - name: Setup dotfiles
      run: |
        # Copy files to home directory (simulating yadm clone)
        cp -r . ~/
        # Run bootstrap
        ~/.config/yadm/bootstrap

    - name: Run healthcheck
      run: nvim --headless -c "checkhealth" -c "qa!"
